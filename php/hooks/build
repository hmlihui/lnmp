#!/bin/bash

# $IMAGE_NAME var is injected into the build so the tag is correct.

echo "Build hook running"
docker build --build-arg TIME_ZONE=Asia/Shanghai \
             --build-arg PHP_FPM_VERSION=7.2 \
             --build-arg PHP_FPM_REDIS_VERSION=4.1.1 \
             --build-arg PHP_FPM_XDEBUG_VERSION=2.6.1 \
             --build-arg PHP_FPM_IMAGICK_VERSION=3.4.3 \
             --build-arg PHP_FPM_MEMCACHED_VERSION=3.0.4 \
             --build-arg PHP_FPM_OPEN_UNIXSOCKE=false \
             --build-arg PHP_FPM_INSTALL_INTL=true \
             --build-arg PHP_FPM_INSTALL_SOAP=true \
             --build-arg PHP_FPM_INSTALL_XSL=true \
             --build-arg PHP_FPM_INSTALL_XMLRPC=true \
             --build-arg PHP_FPM_INSTALL_WDDX=true \
             --build-arg PHP_FPM_INSTALL_BZ2=true \
             --build-arg PHP_FPM_INSTALL_ZIP=true \
             --build-arg PHP_FPM_INSTALL_PCNTL=true \
             --build-arg PHP_FPM_INSTALL_PDO_MYSQL=true \
             --build-arg PHP_FPM_INSTALL_MYSQLI=true \
             --build-arg PHP_FPM_INSTALL_MBSTRING=true \
             --build-arg PHP_FPM_INSTALL_EXIF=true \
             --build-arg PHP_FPM_INSTALL_BCMATH=true \
             --build-arg PHP_FPM_INSTALL_CALENDAR=true \
             --build-arg PHP_FPM_INSTALL_SOCKETS=true \
             --build-arg PHP_FPM_INSTALL_GETTEXT=true \
             --build-arg PHP_FPM_INSTALL_SHMOP=true \
             --build-arg PHP_FPM_INSTALL_SYSVMSG=true \
             --build-arg PHP_FPM_INSTALL_SYSVSEM=true \
             --build-arg PHP_FPM_INSTALL_SYSVSHM=true \
             --build-arg PHP_FPM_INSTALL_OPCACHE=true \
             --build-arg PHP_FPM_INSTALL_PDO_FIREBIRD=false \
             --build-arg PHP_FPM_INSTALL_PDO_DBLIB=false \
             --build-arg PHP_FPM_INSTALL_PDO_OCI=false \
             --build-arg PHP_FPM_INSTALL_PDO_ODBC=false \
             --build-arg PHP_FPM_INSTALL_PDO_PGSQL=false \
             --build-arg PHP_FPM_INSTALL_PGSQL=false \
             --build-arg PHP_FPM_INSTALL_PG_CLIENT=false \
             --build-arg PHP_FPM_INSTALL_OCI8=false \
             --build-arg PHP_FPM_INSTALL_ODBC=false \
             --build-arg PHP_FPM_INSTALL_DBA=false \
             --build-arg PHP_FPM_INSTALL_INTERBASE=false \
             --build-arg PHP_FPM_INSTALL_MCRYPT=false \
             --build-arg PHP_FPM_INSTALL_CURL=false \
             --build-arg PHP_FPM_INSTALL_READLINE=false \
             --build-arg PHP_FPM_INSTALL_SNMP=false \
             --build-arg PHP_FPM_INSTALL_PSPELL=false \
             --build-arg PHP_FPM_INSTALL_RECODE=false \
             --build-arg PHP_FPM_INSTALL_TIDY=false \
             --build-arg PHP_FPM_INSTALL_GMP=false \
             --build-arg PHP_FPM_INSTALL_POSTGRESQL_CLIENT=false \
             --build-arg PHP_FPM_INSTALL_MYSQL_CLIENT=false \
             --build-arg PHP_FPM_INSTALL_IMAP=false \
             --build-arg PHP_FPM_INSTALL_LDAP=false \
             --build-arg PHP_FPM_INSTALL_SWOOLE=false \
             --build-arg PHP_FPM_INSTALL_COMPOSER=true \
             --build-arg PHP_FPM_INSTALL_REDIS=true \
             --build-arg PHP_FPM_INSTALL_XDEBUG=false \
             --build-arg PHP_FPM_INSTALL_IMAGICK=true \
             --build-arg PHP_FPM_INSTALL_MEMCACHED=true \
             --build-arg COMPOSER_PHPCSFIXER=false \
             --build-arg COMPOSER_CODESNIFFER=false \
             --build-arg COMPOSER_REPO_PACKAGIST='https://packagist.phpcomposer.com' \
             -t $IMAGE_NAME .