#!/bin/bash

# $IMAGE_NAME var is injected into the build so the tag is correct.

echo "Build hook running"
docker build --build-arg TIME_ZONE=Asia/Shanghai \
             --build-arg PHP_FPM_VERSION=7.2 \
             --build-arg PHP_FPM_REDIS_VERSION=4.1.1 \
             --build-arg PHP_FPM_XDEBUG_VERSION=2.6.1 \
             --build-arg PHP_FPM_IMAGICK_VERSION=3.4.3 \
             --build-arg PHP_FPM_MEMCACHED_VERSION=3.0.4 \
             --build-arg PHP_FPM_OPEN_UNIXSOCKE=1 \
             --build-arg PHP_FPM_INSTALL_INTL=0 \
             --build-arg PHP_FPM_INSTALL_SOAP=0 \
             --build-arg PHP_FPM_INSTALL_XSL=0 \
             --build-arg PHP_FPM_INSTALL_XMLRPC=0 \
             --build-arg PHP_FPM_INSTALL_WDDX=0 \
             --build-arg PHP_FPM_INSTALL_BZ2=0 \
             --build-arg PHP_FPM_INSTALL_ZIP=0 \
             --build-arg PHP_FPM_INSTALL_PCNTL=0 \
             --build-arg PHP_FPM_INSTALL_PDO_MYSQL=0 \
             --build-arg PHP_FPM_INSTALL_MYSQLI=0 \
             --build-arg PHP_FPM_INSTALL_MBSTRING=0 \
             --build-arg PHP_FPM_INSTALL_EXIF=0 \
             --build-arg PHP_FPM_INSTALL_BCMATH=0 \
             --build-arg PHP_FPM_INSTALL_CALENDAR=0 \
             --build-arg PHP_FPM_INSTALL_SOCKETS=0 \
             --build-arg PHP_FPM_INSTALL_GETTEXT=0 \
             --build-arg PHP_FPM_INSTALL_SHMOP=0 \
             --build-arg PHP_FPM_INSTALL_SYSVMSG=0 \
             --build-arg PHP_FPM_INSTALL_SYSVSEM=0 \
             --build-arg PHP_FPM_INSTALL_SYSVSHM=0 \
             --build-arg PHP_FPM_INSTALL_OPCACHE=0 \
             --build-arg PHP_FPM_INSTALL_PDO_FIREBIRD=1 \
             --build-arg PHP_FPM_INSTALL_PDO_DBLIB=1 \
             --build-arg PHP_FPM_INSTALL_PDO_OCI=1 \
             --build-arg PHP_FPM_INSTALL_PDO_ODBC=1 \
             --build-arg PHP_FPM_INSTALL_PDO_PGSQL=1 \
             --build-arg PHP_FPM_INSTALL_PGSQL=1 \
             --build-arg PHP_FPM_INSTALL_PG_CLIENT=1 \
             --build-arg PHP_FPM_INSTALL_OCI8=1 \
             --build-arg PHP_FPM_INSTALL_ODBC=1 \
             --build-arg PHP_FPM_INSTALL_DBA=1 \
             --build-arg PHP_FPM_INSTALL_INTERBASE=1 \
             --build-arg PHP_FPM_INSTALL_MCRYPT=1 \
             --build-arg PHP_FPM_INSTALL_CURL=1 \
             --build-arg PHP_FPM_INSTALL_READLINE=1 \
             --build-arg PHP_FPM_INSTALL_SNMP=1 \
             --build-arg PHP_FPM_INSTALL_PSPELL=1 \
             --build-arg PHP_FPM_INSTALL_RECODE=1 \
             --build-arg PHP_FPM_INSTALL_TIDY=1 \
             --build-arg PHP_FPM_INSTALL_GMP=1 \
             --build-arg PHP_FPM_INSTALL_POSTGRESQL_CLIENT=1 \
             --build-arg PHP_FPM_INSTALL_MYSQL_CLIENT=1 \
             --build-arg PHP_FPM_INSTALL_IMAP=1 \
             --build-arg PHP_FPM_INSTALL_LDAP=1 \
             --build-arg PHP_FPM_INSTALL_SWOOLE=1 \
             --build-arg PHP_FPM_INSTALL_COMPOSER=0 \
             --build-arg PHP_FPM_INSTALL_REDIS=0 \
             --build-arg PHP_FPM_INSTALL_XDEBUG=1 \
             --build-arg PHP_FPM_INSTALL_IMAGICK=0 \
             --build-arg PHP_FPM_INSTALL_MEMCACHED=0 \
             --build-arg COMPOSER_PHPCSFIXER=1 \
             --build-arg COMPOSER_CODESNIFFER=1 \
             --build-arg COMPOSER_REPO_PACKAGIST='https://packagist.phpcomposer.com' \
             -t $IMAGE_NAME .